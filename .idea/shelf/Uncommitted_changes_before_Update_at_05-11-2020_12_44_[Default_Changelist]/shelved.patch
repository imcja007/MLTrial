Index: app/src/main/java/com/example/mltrial/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.mltrial;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Point;\r\nimport android.graphics.Rect;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.mlkit.vision.common.InputImage;\r\nimport com.google.mlkit.vision.text.Text;\r\nimport com.google.mlkit.vision.text.TextRecognition;\r\nimport com.google.mlkit.vision.text.TextRecognizer;\r\nimport com.theartofdev.edmodo.cropper.CropImage;\r\n\r\nimport java.io.IOException;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\n\r\npublic class MainActivity<nDialog> extends AppCompatActivity {\r\n\r\n    public static String number;\r\n    public Button conf;\r\n    Uri mImageUri;\r\n    static String resultText;\r\n    private ImageView imageView;\r\n    private InputImage image;\r\n    private TextInputEditText t1;\r\n    static ProgressDialog nDialog;\r\n    ProgressBar pgsBar;\r\n    Context context = MainActivity.this;\r\n    String pattern2 = \"[A-Z]{2}[0-9]{2}[A-Z]{2}[0-9]{4}\";\r\n    Pattern pattern = Pattern.compile(pattern2);\r\n    Matcher matcher;\r\n\r\n    private static int SPLASH_SCREEN_TIME_OUT = 2000;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        assert getSupportActionBar() != null;   //null check\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\n        imageView = findViewById(R.id.image_view);\r\n        conf = findViewById(R.id.confirm_button);\r\n        t1 = findViewById(R.id.regNo);\r\n\r\n        //   pgsBar = (ProgressBar) findViewById(R.id.pBar);\r\n        nDialog = new ProgressDialog(MainActivity.this);\r\n        nDialog.setMessage(\"Sabr rakhlo bhai thoda..\");\r\n        nDialog.setTitle(\"Fetching Data\");\r\n        nDialog.setIndeterminate(true);\r\n        nDialog.setCancelable(false);\r\n        nDialog.dismiss();\r\n\r\n        conf.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n\r\n\r\n            public void onClick(View view) {\r\n                {\r\n//                    number = t1.getText().toString().replaceAll(\"\\\\s\", \"\");\r\n//                    new parsing(context).execute();\r\n//                    t1.setText(\"\");\r\n\r\n                    number = (t1.getText().toString().replaceAll(\"\\\\s\", \"\").trim()).toUpperCase();\r\n                    System.out.println(\"%%%%%%%%%%%%%%%%%%%%%\" + number);\r\n                    if (pattern.matcher(number).matches()) {\r\n                        new parsing(context).execute();\r\n                        t1.setText(\"\");\r\n                        imageView.setImageBitmap(null);\r\n                    } else {\r\n                        Toast.makeText(MainActivity.this, \"Ahhh..Please check your number\", Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public void onChooseFile(View v) {\r\n        CropImage.activity().start(MainActivity.this);\r\n\r\n    }\r\n\r\n\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        CropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n\r\n\r\n            if (resultCode == RESULT_OK) {\r\n                mImageUri = result.getUri();\r\n                imageView.setImageURI(mImageUri);\r\n\r\n                try {\r\n                    Bitmap bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), mImageUri);\r\n                    imageFromBitmap(bitmap);\r\n\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        } else if (resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE) {\r\n            Exception e = result.getError();\r\n            Toast.makeText(this, \"Possible error is :  \" + e, Toast.LENGTH_SHORT);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    private void imageFromBitmap(Bitmap bitmap) {\r\n        int rotationDegree = 0;\r\n        // [START image_from_bitmap]\r\n        image = InputImage.fromBitmap(bitmap, rotationDegree);\r\n        // [END image_from_bitmap]\r\n\r\n        TextRecognizer recognizer = TextRecognition.getClient();\r\n        Task<Text> result =\r\n                recognizer.process(image)\r\n                        .addOnSuccessListener(new OnSuccessListener<Text>() {\r\n                            @Override\r\n                            public void onSuccess(Text result) {\r\n                                // [START mlkit_process_text_block]\r\n                                resultText = result.getText().trim();\r\n                                System.out.println(\"RESULT TEXT=====================\" + resultText);\r\n                                for (Text.TextBlock block : result.getTextBlocks()) {\r\n                                    String blockText = block.getText();\r\n                                    Point[] blockCornerPoints = block.getCornerPoints();\r\n                                    Rect blockFrame = block.getBoundingBox();\r\n                                    for (Text.Line line : block.getLines()) {\r\n                                        String lineText = line.getText();\r\n                                        System.out.println(\"Line TEXT=====================\" + lineText);\r\n                                        Point[] lineCornerPoints = line.getCornerPoints();\r\n                                        Rect lineFrame = line.getBoundingBox();\r\n                                        for (Text.Element element : line.getElements()) {\r\n                                            String elementText = element.getText();\r\n                                            Point[] elementCornerPoints = element.getCornerPoints();\r\n                                            Rect elementFrame = element.getBoundingBox();\r\n                                            System.out.println(\"elemnt TEXT=====================\" + elementText);\r\n                                            resultText = resultText.replaceAll(\"\\\\s\", \"\");\r\n                                            resultText = resultText.replaceAll(\"IND\", \"\");\r\n                                            resultText = resultText.replaceAll(\"ind\", \"\");\r\n                                            if (resultText.charAt(2) == 'O' || resultText.charAt(2) == 'o')\r\n                                                resultText = resultText.substring(0, 2) + '0' + resultText.substring(2 + 1);\r\n                                            t1.setText(resultText);\r\n                                            if (pattern.matcher(resultText).matches()) {\r\n                                                number = resultText;\r\n                                                new parsing(context).execute();\r\n                                                t1.setText(\"\");\r\n                                                imageView.setImageBitmap(null);\r\n                                            } else {\r\n//                                                warn.setText(\"Cant recognise registration number\");\r\n                                                Toast.makeText(MainActivity.this, \"Ahhh Please type your number\", Toast.LENGTH_LONG).show();\r\n                                                t1.setText(\"\");\r\n\r\n                                            }\r\n\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                        .addOnFailureListener(\r\n                                new OnFailureListener() {\r\n                                    @Override\r\n                                    public void onFailure(@NonNull Exception e) {\r\n                                        // Task failed with an exception\r\n                                        // ...\r\n                                        Toast.makeText(MainActivity.this, \"Ahhh..Something went wrong. Please try again.\", Toast.LENGTH_LONG).show();\r\n                                    }\r\n                                });\r\n    }\r\n\r\n    public void back(View view) {\r\n        finish();\r\n    }\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.menu, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n\r\n        int id = item.getItemId();\r\n        if (id == R.id.add_record) {\r\n\r\n            Intent add_mem = new Intent(this, history.class);\r\n            startActivity(add_mem);\r\n\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        finish();\r\n        return true;\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/mltrial/MainActivity.java	(revision ae4ddf195d16203423e80d60cf34c0d415312ab9)
+++ app/src/main/java/com/example/mltrial/MainActivity.java	(date 1604558804742)
@@ -145,6 +145,7 @@
                                 resultText = result.getText().trim();
                                 System.out.println("RESULT TEXT=====================" + resultText);
                                 for (Text.TextBlock block : result.getTextBlocks()) {
+
                                     String blockText = block.getText();
                                     Point[] blockCornerPoints = block.getCornerPoints();
                                     Rect blockFrame = block.getBoundingBox();
